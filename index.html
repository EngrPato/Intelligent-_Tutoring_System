{% extends "base.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Problems</h2>
    <a class="btn btn-outline-primary" href="{{ url_for('add_problem') }}">âž• Create New</a>
  </div>

  {% if problems %}
    <div class="row">
      {% for p in problems %}
        <div class="col-md-6">
          <div class="card mb-3 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">{{ p.name }}</h5>
              <p class="card-text">
                <strong>Shape:</strong>
                {% if p.hasShape %}
                  {{ p.hasShape[0].name }}
                {% else %}
                  <span class="text-muted">(not set)</span>
                {% endif %}
              </p>
              <p class="card-text">
                <strong>Dimensions:</strong>
                {% set dims = [] %}
                {% if p.hasProblemDimension %}
                  {% for d in p.hasProblemDimension %}
                    {% set _ = dims.append(d.dimensionName[0] ~ ' = ' ~ d.dimensionValue[0]) %}
                  {% endfor %}
                {% elif p.hasDimension %}
                  {% for d in p.hasDimension %}
                    {% set _ = dims.append(d.dimensionName[0] ~ ' = ' ~ d.dimensionValue[0]) %}
                  {% endfor %}
                {% elif p.dimensionValue %}
                  {% set _ = dims.append((p.dimensionName[0] if p.dimensionName else 'dim') ~ ' = ' ~ p.dimensionValue[0]) %}
                {% endif %}
                {% if dims %}{{ dims|join(', ') }}{% else %}<span class="text-muted">none</span>{% endif %}
              </p>
              <a href="{{ url_for('problem_view', name=p.name) }}" class="btn btn-primary">Open</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="p-4 bg-white rounded shadow-sm text-center">
      <p class="mb-0">No problems found in the ontology. Use "Create New" to add a problem.</p>
    </div>
  {% endif %}
{% endblock %}
